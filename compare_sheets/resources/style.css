/* === Sheet side-by-side preview === */
.sheet-preview { display:flex; gap:12px; margin:8px 0 16px; padding:0 8px; box-sizing:border-box; }
.sheet-preview.hidden { display:none; }
.sheet-preview-col { flex:1 1 0; min-width:0; display:flex; flex-direction:column; }
.preview-title { margin:0 0 4px; font-size:13px; font-weight:600; }
.preview-controls-row { display:none; align-items:center; gap:12px; margin:-4px 0 8px 0; padding:0 8px; }
.preview-controls-row.active { display:flex; }
.preview-controls-row .sync-label { font-size:11px; font-weight:400; display:flex; align-items:center; gap:6px; }
.preview-controls-row input[type=checkbox] { transform:scale(.9); }
.sheet-grid { max-height:300px; }
.sheet-grid { position:relative; border:1px solid var(--border-color,#ccc); background:#fff; overflow:auto; height:300px; max-height:300px; font:12px/1.3 monospace; width:100%; overscroll-behavior:contain; scroll-behavior:auto; }
/* Removed will-change:transform to keep sticky headers stable */
.sheet-grid table { border-collapse:collapse; table-layout:fixed; width:max-content; min-width:100%; }
.sheet-grid th, .sheet-grid td { border:1px solid #e0e0e0; padding:2px 4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
/* Sticky headers & first column */
/* Sticky header row and first column */
.sheet-grid thead th { position:sticky; top:0; z-index:30; background:#f7f7f9; box-shadow:0 1px 0 #ccc; }
.sheet-grid tbody th { position:sticky; left:0; z-index:25; background:#f7f7f9; box-shadow:1px 0 0 #ccc; }
/* Ensure structural highlight classes on sticky cells keep background (override row hover/outlines) */
.sheet-grid thead th.col-struct-inserted, .sheet-grid tbody th.row-struct-inserted { background:#c8e6c9 !important; }
.sheet-grid thead th.col-struct-deleted, .sheet-grid tbody th.row-struct-deleted { background:#ffcdd2 !important; }
/* Avoid shifting due to borders when scrolling */
.sheet-grid thead th, .sheet-grid tbody th { background-clip:padding-box; }
/* Intersection cell (corner) ensure above others */
.sheet-grid thead th.corner-cell { z-index:40; left:0; }
/* When both sticky (first column + header), raise z-index */
.sheet-grid thead tr th:first-child { left:0; }
.sheet-grid tr.diff-row-value { background:#fffef2; }
.sheet-grid tr.diff-row-formula { background:#f5faff; }
.sheet-grid tr.diff-row-formulaToValue { background:#fdf5fa; }
.sheet-grid tr.diff-row-valueToFormula { background:#fff8f0; }
.sheet-grid tr.diff-row-type { background:#f7f9fa; }
.sheet-grid tr.diff-row-inserted-row { background:#f3faf3; }
.sheet-grid tr.diff-row-deleted-row { background:#fff6f7; }
/* Cell-level diff colors */
/* Cell-level diff colors aligned with legend blocks */
.sheet-grid td.diff-cell-value { background:#fff59d !important; }
.sheet-grid td.diff-cell-formula { background:#bbdefb !important; }
.sheet-grid td.diff-cell-formulaToValue { background:#d1c4e9 !important; }
.sheet-grid td.diff-cell-valueToFormula { background:#ffe0b2 !important; }
.sheet-grid td.diff-cell-type { background:#f8bbd0 !important; }
.sheet-grid td.diff-cell-inserted-row { background:#c8e6c9 !important; }
.sheet-grid td.diff-cell-deleted-row { background:#ffcdd2 !important; }
/* Added explicit colors for format / inserted-col / deleted-col if not already by row */
.sheet-grid td.diff-cell-format { background:#cfd8dc !important; }
.sheet-grid td.diff-cell-inserted-col { background:#c5e1a5 !important; }
.sheet-grid td.diff-cell-deleted-col { background:#ef9a9a !important; }
/* Multi-category layering: apply subtle outlines for secondary classes beyond the first.
	Priority order already applied in code; here we add generic outline stacking using nth-of-type heuristic is not possible, so rely on multiple classes: */
.sheet-grid td.diff-cell-formula.diff-cell-value { box-shadow:inset 0 0 0 2px #1976d2; }
.sheet-grid td.diff-cell-formula.diff-cell-type { box-shadow:inset 0 0 0 2px #455a64; }
.sheet-grid td.diff-cell-value.diff-cell-type { box-shadow:inset 0 0 0 2px #6d4c41; }
.sheet-grid td.diff-cell-inserted-row.diff-cell-value, .sheet-grid td.diff-cell-inserted-col.diff-cell-value { box-shadow:inset 0 0 0 2px #2e7d32; }
.sheet-grid td.diff-cell-deleted-row.diff-cell-value, .sheet-grid td.diff-cell-deleted-col.diff-cell-value { box-shadow:inset 0 0 0 2px #c62828; }
.sheet-grid td.diff-cell-format { outline:1px dashed #607d8b; }
/* Multi-category diagonal hatch (uses inline --multi-bg) */
/* Multi-category overlay: background-color remains from first category; pattern is layered */
.sheet-grid td.multi-cat { background-size:100% 100% !important; }
/* Structural (row/col) header highlighting */
.sheet-grid th.row-struct-inserted { background:#c8e6c9 !important; position:sticky; left:0; z-index:26; }
.sheet-grid th.row-struct-deleted { background:#ffcdd2 !important; position:sticky; left:0; z-index:26; }
.sheet-grid th.col-struct-inserted { background:#c8e6c9 !important; }
.sheet-grid th.col-struct-deleted { background:#ffcdd2 !important; }
/* Multi-category now uses background-image directly (no pseudo-element) */
.sheet-grid td.multi-cat { background-blend-mode:normal; }
.sheet-grid tr:hover { outline:1px solid #1976d2; }
.sheet-grid .cell-formula { color:#1976d2; }
.sheet-grid .cell-empty { color:#bbb; }
/* Resizable preview headers */
.sheet-grid th { position:relative; }
.col-resizer, .row-resizer { position:absolute; background:transparent; }
.col-resizer { top:0; right:0; width:6px; cursor:col-resize; height:100%; }
.row-resizer { bottom:0; left:0; height:6px; cursor:row-resize; width:100%; }
.col-resizer:hover, .row-resizer:hover { background:rgba(0,164,246,0.15); }
/* Core flexible window layout (OBLIGATORY) */
html, body {height:100%; margin:0; padding:0; font-family:Segoe UI,Arial,sans-serif;}
body {position:absolute; top:0; left:0; right:0; bottom:0; overflow:hidden; color:var(--fg,#222); background:var(--bg,#fff);}
.layout-root {position:absolute; top:0; left:0; right:0; bottom:0; display:flex; flex-direction:row;}
.panel-left {width:360px; min-width:320px; max-width:460px; background:var(--side-bg,#f5f5f7); border-right:1px solid var(--border,#ccc); overflow:auto; padding:12px; box-sizing:border-box;}
.panel-right {flex:1; position:relative; display:flex; flex-direction:column; overflow:hidden; min-width:0;}
/* Sidebar collapse */
body.sidebar-collapsed .panel-left { width:0 !important; min-width:0 !important; max-width:0 !important; padding:0 !important; border-right:0 !important; overflow:hidden !important; }
body.sidebar-collapsed .panel-left * { display:none !important; }
body.sidebar-collapsed .panel-right { min-width:0; }
/* Smooth layout transition */
/* Removed transition for instant sidebar toggle */
.panel-left, .panel-right { transition:none !important; }
/* Toggle button style (reuse existing button reset) */
#btnToggleSidebar { width:32px; height:28px; }
#btnToggleSidebar.topbar-toggle { margin-left:12px; background:transparent !important; border:none !important; width:34px; height:28px; padding:0; display:flex; align-items:center; justify-content:center; cursor:pointer; }
#btnToggleSidebar.topbar-toggle img { width:20px; height:20px; pointer-events:none; }
body.sidebar-collapsed #btnToggleSidebar.topbar-toggle img { transform:none; }
/* Status toolbar toggle */
#btnToggleSidebar.status-toggle { background:transparent !important; border:none !important; width:28px; height:24px; padding:0; margin-right:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
#btnToggleSidebar.status-toggle img { width:18px; height:18px; }
/* Hidden state */
.sidebar-toggle-hidden { display:none !important; }
#btnToggleSidebar .icon-open { display:none; }
body.sidebar-collapsed #btnToggleSidebar .icon-close { display:none; }
body.sidebar-collapsed #btnToggleSidebar .icon-open { display:block; }

/* Ensure preview columns always equal width (flex handles) */
.sheet-preview { width:100%; }
/* Unified equal-width columns (flex distributes space evenly) */
.sheet-preview-col { flex:1 1 0 !important; }
.sheet-preview-col:first-child, .sheet-preview-col:last-child { min-width:0; }
/* Prevent diff overflow */
.diff-container, .diff-container .diff-scroll { max-width:100%; box-sizing:border-box; }
/* 3 fixed vertical regions layout */
/* Responsive vertical layout: status (fixed), previews (fixed), diff (flex fills rest) */
.panel-right.layout-fixed-3 { display:flex; flex-direction:column; min-height:0; }
.region-status { flex:0 0 60px; height:60px; overflow:hidden; display:flex; flex-direction:column; }
.region-status .toolbar { flex:0 0 34px; }
.region-status .messages { flex:1 1 auto; overflow:auto; }
.region-previews { flex:0 0 300px; position:relative; display:flex; flex-direction:column; overflow:hidden; min-height:140px; }
.region-previews .sheet-preview { flex:1 1 auto; }
/* Adjust sheet-grid height relative inside previews (will shrink if container shrinks) */
.region-previews .sheet-grid { height:240px; max-height:240px; }
.region-diff { flex:1 1 auto; min-height:0; margin-top:0; overflow:hidden; display:flex; flex-direction:column; }
.region-diff .diff-container { flex:1 1 auto; min-height:0; height:auto; overflow:auto; }
.toolbar {height:32px; display:flex; align-items:center; gap:12px; padding:0 12px; border-bottom:1px solid var(--border,#ccc); background:var(--toolbar-bg,#fafafa); font-size:12px;}
.section {margin-bottom:16px;}
.section h2 {margin:12px 0 6px; font-size:14px;}
.app-title {font-size:16px; margin:4px 0 12px;}
.option-item {font-size:12px; margin:4px 0; display:flex; align-items:center; gap:4px;}
.actions button {display:block; width:100%; margin:4px 0;}
button {cursor:pointer; font-size:12px; padding:6px 10px; border:1px solid var(--btn-border,#888); background:var(--btn-bg,#eee); border-radius:4px;}
button.primary {background:#2d76d2; color:#fff; border-color:#2d76d2;}
button.primary:disabled {opacity:.5;}
button.secondary {background:#e0e0e0;}
button:disabled {cursor:not-allowed; opacity:.6;}
.legend-list {list-style:none; padding:0; margin:0; font-size:12px;}
.legend-list li {display:flex; align-items:center; gap:6px; margin:4px 0;}
.legend-list li label { flex:1; display:flex; align-items:center; }
.legend-list li.legend-dim { opacity:0.45; }
.legend-list .cat-count { margin-left:auto; min-width:20px; text-align:right; display:inline-block; font-variant-numeric:tabular-nums; }
.lgd {display:inline-block; width:16px; height:12px; border:1px solid #999;}
.legend-actions { display:flex; align-items:center; gap:4px; margin:4px 0 8px 0; }
/* Smaller legend action icons */
.legend-actions button.icon-only { width:24px; height:24px; padding:2px; }
.legend-actions .icon-btn img{ width:16px; height:16px; }
/* Push reset icon to the far right */
#btnCatReset { margin-left:auto; }
.lgd.value-change {background:#fff59d;}
.lgd.formula-change {background:#bbdefb;}
.lgd.inserted-row {background:#c8e6c9;}
.lgd.deleted-row {background:#ffcdd2;}
.lgd.formulaToValue {background:#d1c4e9;}
.lgd.valueToFormula {background:#ffe0b2;}
.lgd.type {background:#f8bbd0;}
.lgd.format {background:#cfd8dc;}
.lgd.inserted-col {background:#c5e1a5;}
.lgd.deleted-col {background:#ef9a9a;}
/* Extra spacing between color indicator and text */
.legend-list label { display:flex; align-items:center; gap:3px; }
.legend-list .lgd { margin-right:3px; }
.diff-container {flex:1; overflow:hidden; font-size:12px; line-height:1.4; padding:8px 8px 8px; box-sizing:border-box;}
.diff-container.fixed-header { display:flex; flex-direction:column; overflow:hidden; padding:0; height:100%; }
/* Non-scrolling header */
.diff-container.fixed-header .diff-header { flex:0 0 auto; display:grid; grid-template-columns:120px 120px minmax(320px,1fr) minmax(320px,1fr); gap:4px; padding:4px 8px; font-weight:600; background:var(--header-bg,#f0f0f0); border-bottom:1px solid var(--border,#ccc); z-index:20; }
/* Scroll area */
.diff-container.fixed-header .diff-scroll { flex:1 1 auto; overflow:auto; }
.diff-container.fixed-header .diff-rows { padding:4px 8px 8px; }
.diff-container.fixed-header .diff-rows .diff-row { display:grid; grid-template-columns:120px 120px minmax(320px,1fr) minmax(320px,1fr); }
.diff-row {display:grid; grid-template-columns:120px 120px minmax(320px,1fr) minmax(320px,1fr); gap:4px; padding:2px 4px; border-bottom:1px solid #ececec;}
.diff-container .diff-row { cursor:pointer; }
.diff-container .diff-row.active { outline:2px solid #00a4f6; outline-offset:-1px; }
.diff-container .diff-row:focus { outline:2px solid #00a4f6; outline-offset:-1px; }
/* Preview cell focus: persistent outline (override global box-shadow reset) */
.sheet-grid td.preview-focus { position:relative; outline:2px solid #00a4f6 !important; outline-offset:-2px; /* no background override to preserve original fill/gradients */ }
/* Structural full-row / full-column highlight */
/* Row / column structural outline highlight (no fill) */
/* Structural highlight: only external outline for full row / column */
/* Row: apply class on <tr> and draw overlay */
.sheet-grid tr.preview-focus-row { position:relative; }
.sheet-grid tr.preview-focus-row::after { content:""; position:absolute; left:0; top:0; width:100%; height:100%; border:2px solid #00a4f6; pointer-events:none; box-sizing:border-box; }
/* Column: per-cell borders only on outer perimeter */
.sheet-grid td.preview-focus-col { border-left:2px solid #00a4f6 !important; border-right:2px solid #00a4f6 !important; }
.sheet-grid td.preview-focus-col-top { border-top:2px solid #00a4f6 !important; }
.sheet-grid td.preview-focus-col-bottom { border-bottom:2px solid #00a4f6 !important; }
/* Remove legacy flash animation (disabled for persistent highlight) */
.sheet-grid td.preview-flash,.sheet-grid td.preview-flash::after { animation:none !important; }
.diff-container .diff-row:hover { outline:1px solid #00a4f6; outline-offset:-1px; }
.diff-container .diff-row:focus-visible { outline:2px solid #00a4f6; outline-offset:-1px; }
/* Removed generic white background so category color classes remain visible */
/* .diff-container.fixed-header .diff-row { background:#fff; } */
.diff-row.header {font-weight:bold; background:var(--header-bg,#f0f0f0); position:sticky; top:0; z-index:2; box-shadow:0 1px 0 var(--border,#ccc);}
.diff-row.value-change {background:#fffde7;}
.diff-row.formula-change {background:#e3f2fd;}
.diff-row.inserted-row {background:#e8f5e9;}
.diff-row.deleted-row {background:#ffebee;}
.diff-row.formulaToValue {background:#f3e5f5;}
.diff-row.valueToFormula {background:#fff3e0;}
.diff-row.type {background:#fce4ec;}
.diff-row.format {background:#eceff1;}
.diff-row.inserted-col {background:#e7f6d5;}
.diff-row.deleted-col {background:#ffe5e5;}
.progress-bar {height:4px; width:100%; background:#ddd; position:relative; margin-top:-4px;}
.progress-bar span {display:block; height:100%; background:#2d76d2; width:0; transition:width .15s linear;}
/* Status message coloring */
#progressText.status-warn { color:#b36b00 !important; font-weight:600; }
#progressText.status-error { color:#b00020 !important; font-weight:600; }
/* About modal */
.about .about-wrapper {padding:16px; font-size:13px;}
.div_buttons {margin-top:20px; display:flex; gap:12px; justify-content:flex-end;}
.button {padding:6px 12px; background:#2d76d2; color:#fff; border-radius:4px; cursor:pointer;}
.button.secondary {background:#666;}
.button:hover {filter:brightness(1.05);}

/* === Inquire-like visual spec overrides (2025-08-16) === */
body, html { background:#f1f1f1 !important; color:#000 !important; }
.panel-left { background:#f1f1f1 !important; border-right:1px solid #3a3a3a !important; }
.panel-right { background:#f1f1f1 !important; }
.toolbar { background:#f1f1f1 !important; border-bottom:1px solid #3a3a3a !important; box-shadow:none !important; }
.section, .diff-container { background:#f1f1f1; }

/* Inputs */
select, input[type=number], input[type=text] { background:#ffffff; border:1px solid #3a3a3a; color:#000; border-radius:3px; padding:2px 4px; font-size:12px; box-shadow:none; }
select:focus, input:focus { outline:1px solid #00a4f6; }

/* Buttons */
button, .button { background:#e1e1e1 !important; color:#000 !important; border:none !important; border-radius:5px !important; box-shadow:none !important; transition:background .15s, color .15s; font-weight:500; }
button.primary, button.secondary { background:#e1e1e1 !important; color:#000 !important; }
button:hover:not(.has-icon):not(.icon-only):not(:disabled), button:active:not(.has-icon):not(.icon-only):not(:disabled), .button:hover:not(.has-icon):not(.icon-only):not(:disabled) { background:#00a4f6 !important; color:#ffffff !important; }
button:disabled { opacity:.55; }

/* Icon buttons (placeholder class) */
button.has-icon { display:inline-flex; align-items:center; gap:6px; }
button.has-icon:hover { background:#e1e1e1 !important; color:#000 !important; }
button.icon-only { display:inline-flex; align-items:center; justify-content:center; padding:4px 6px; width:32px; }
button.icon-only img { width:16px; height:16px; pointer-events:none; }
button.icon-only:hover { background:#e1e1e1 !important; color:#000 !important; }

/* Input row alignment & select sizing */
.input-row { display:flex; align-items:center; gap:6px; }
#sidebar .input-row { width:100%; }
.input-row select { flex:1 1 auto; }
.input-row button.icon-only { margin-left:auto; }
#baseSheetSelect, #targetSheetSelect { min-width:200px; height:28px; box-sizing:border-box; }
#baseSheetSelect:disabled, #targetSheetSelect:disabled { /* keep normal opacity so visual weight unchanged when uploads blocked */ opacity:1; cursor:not-allowed; }
.upload-menu-container.disabled { opacity:1; /* keep selects fully visible */ }
.upload-menu-container.disabled .icon-btn { opacity:.55; }
.upload-menu-container.disabled button, .upload-menu-container.disabled .icon-btn { cursor:not-allowed !important; }
button.icon-only { height:28px; }
/* File name caption above selects */
.file-name-row { display:flex; justify-content:flex-end; margin:0 0 2px 0; }
.file-name-label { display:none; font-size:11px; color:#444; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.file-name-label.visible { display:block; }
/* Upload dropdown */
.upload-menu-container { position:relative; }
.upload-menu-container .upload-dropdown { position:absolute; top:100%; right:0; background:#ffffff; border:1px solid #3a3a3a; border-radius:4px; padding:4px 0; display:none; flex-direction:column; min-width:140px; z-index:500; }
.upload-menu-container .upload-dropdown .dropdown-item { background:none !important; border:none !important; text-align:left; width:100%; padding:6px 10px; font-size:12px; cursor:pointer; }
.upload-menu-container .upload-dropdown .dropdown-item:hover { background:#00a4f6 !important; color:#fff !important; }
.upload-menu-container.open .upload-dropdown { display:flex; }
/* Disabled current-file items (API later) */
.upload-menu-container .upload-dropdown .dropdown-item.disabled-api { opacity:.45; cursor:not-allowed !important; background:#e1e1e1 !important; color:#555 !important; }
.upload-menu-container .upload-dropdown .dropdown-item.disabled-api:hover { background:#e1e1e1 !important; color:#555 !important; }

/* Legend indicators keep thin border */
.lgd { border:1px solid #3a3a3a !important; }

/* Diff rows / borders */
.diff-row { border-bottom:1px solid #3a3a3a !important; }
.diff-row.header { background:#e5e5e5 !important; }

/* Remove any shadows globally */
* { box-shadow:none !important; }

/* Message area */
.messages { font-size:12px; padding:4px 8px; border-bottom:1px solid #ccc; min-height:18px; }
.app-blocker { position:absolute; inset:0; background:rgba(255,255,255,0.55); z-index:2000; display:none; cursor:progress; pointer-events:none; }
.app-blocker.active { display:block; pointer-events:auto; }
.messages .msg-error { color:#b00020; }
.messages .msg-warn { color:#b36b00; }
.messages .msg-info { color:#0d47a1; }

/* Accessibility focus for buttons */
button:focus-visible, .button:focus-visible { outline:2px solid #00a4f6; outline-offset:1px; }

/* Modal for sheet selection */
.modal.hidden { display:none; }
.modal { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:3000; }
.modal-content { background:#fefefe; border:1px solid #3a3a3a; padding:20px 20px 16px; width:560px; max-width:80vw; max-height:78vh; overflow:auto; border-radius:8px; box-sizing:border-box; }
.sheet-list { max-height:48vh; overflow:auto; margin:12px 0 16px; border:1px solid #ccc; padding:10px; display:flex; flex-direction:column; gap:6px; background:#fff; }
.sheet-list label { display:flex; align-items:center; gap:6px; font-size:12px; }
.modal-actions { display:flex; align-items:center; gap:12px; justify-content:space-between; }
/* Sheet selection modal specific layout */
.sheet-select-actions .left-group { display:flex; gap:6px; }
.sheet-select-actions .right-group { margin-left:auto; display:flex; gap:8px; }
/* === Diff search bar === */
.diff-search-bar { display:flex; align-items:center; gap:8px; padding:4px 8px; background:#f1f1f1; border-bottom:1px solid #3a3a3a; font-size:12px; }
.diff-search-bar button { flex:0 0 auto; }
.diff-search-bar .diff-search-fields { display:flex; align-items:center; gap:6px; }
.diff-search-bar .diff-search-fields.hidden { display:none; }
#diffSearchInput { width:160px; }
#diffSearchCount { min-width:48px; text-align:center; font-variant-numeric:tabular-nums; }
/* Diff search highlighting (use pseudo-element so global box-shadow reset doesn't kill it) */
.diff-row.search-match { position:relative; }
.diff-row.search-match::before { content:""; position:absolute; inset:0; border:2px solid #00A4F6; pointer-events:none; border-radius:2px; box-sizing:border-box; }
.diff-row.search-current::before { animation:diffSearchPulse 1.2s ease-in-out infinite; }
@keyframes diffSearchPulse { 0%,100% { border-color:#00A4F6; } 50% { border-color:#5ccfff; } }
/* Temporary flash for navigated diff row */
.diff-row.diff-flash { position:relative; }
.diff-row.diff-flash::after { content:""; position:absolute; inset:0; border:2px solid #00a4f6; pointer-events:none; animation:previewFlashFade 1.5s ease forwards; }
/* Generic hidden utility (scoped) */
.diff-search-bar.hidden { display:none; }

/* === Sidebar collapse (instant, no animation) === */
body.sidebar-collapsed .panel-left { width:0 !important; min-width:0 !important; max-width:0 !important; padding:0 !important; overflow:hidden !important; border-right:0 !important; }
body.sidebar-collapsed .panel-left * { display:none !important; }
body.sidebar-collapsed .panel-right { min-width:0 !important; }
/* Toggle button (placed in status toolbar) */
#btnToggleSidebar { background:transparent; border:1px solid #999; width:28px; height:24px; padding:0; display:flex; align-items:center; justify-content:center; cursor:pointer; border-radius:4px; }
#btnToggleSidebar img { width:16px; height:16px; pointer-events:none; }
#btnToggleSidebar .icon-open { display:none; }
body.sidebar-collapsed #btnToggleSidebar .icon-close { display:none; }
body.sidebar-collapsed #btnToggleSidebar .icon-open { display:block; }
/* Top plugin menu */
.topbar { height:32px; background:#f1f1f1; border-bottom:1px solid #3a3a3a; display:flex; align-items:center; padding:0 8px; box-sizing:border-box; }
.plugin-menu { position:relative; }
.plugin-icon { background:#e1e1e1 !important; border:none !important; width:32px; height:28px; display:flex; align-items:center; justify-content:center; font-size:16px; cursor:pointer; border-radius:4px; }
.plugin-dropdown { position:absolute; top:100%; left:0; min-width:150px; background:#fff; border:1px solid #3a3a3a; border-radius:4px; padding:4px 0; display:none; flex-direction:column; z-index:5000; }
.plugin-dropdown.open { display:flex; }
.plugin-dropdown .menu-item { text-decoration:none; font-size:12px; padding:6px 12px; color:#000; display:block; }
.plugin-dropdown .menu-item:hover, .plugin-dropdown .menu-item.active { background:#00a4f6; color:#fff; }
.about .topbar { margin-bottom:8px; }

/* === Custom floating tooltip for disabled upload buttons === */
.upload-disabled-hint { position:relative; }
#uploadDisabledHint.floating-hint { position:absolute; max-width:260px; background:#222; color:#fff; padding:6px 10px; border-radius:4px; font-size:12px; line-height:1.4; box-shadow:0 2px 6px rgba(0,0,0,0.35); pointer-events:none; z-index:9999; transition:opacity .12s ease; opacity:0; left:0; top:0; white-space:normal; }
#uploadDisabledHint.floating-hint::after { content:""; position:absolute; left:50%; top:-6px; transform:translateX(-50%); border:6px solid transparent; border-bottom-color:#222; }
/* Top plugin menu */
.topbar { height:32px; background:#f1f1f1; border-bottom:1px solid #3a3a3a; display:flex; align-items:center; padding:0 8px; box-sizing:border-box; }
.plugin-menu { position:relative; }
.plugin-icon { background:#e1e1e1 !important; border:none !important; width:32px; height:28px; display:flex; align-items:center; justify-content:center; font-size:16px; cursor:pointer; border-radius:4px; }
.plugin-dropdown { position:absolute; top:100%; left:0; min-width:150px; background:#fff; border:1px solid #3a3a3a; border-radius:4px; padding:4px 0; display:none; flex-direction:column; z-index:5000; }
.plugin-dropdown.open { display:flex; }
.plugin-dropdown .menu-item { text-decoration:none; font-size:12px; padding:6px 12px; color:#000; display:block; }
.plugin-dropdown .menu-item:hover, .plugin-dropdown .menu-item.active { background:#00a4f6; color:#fff; }
.about .topbar { margin-bottom:8px; }